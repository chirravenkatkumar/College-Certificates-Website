<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload History</title>
    <link rel="stylesheet" href="/styles/history.css">
</head>
<body>
    <div class="container">
        <h1>Upload History</h1>
        <% if (history.length > 0) { %>
            <div class="history-list">
                <% history.forEach(item => { %>
                    <div class="history-item">
                        <button class="date-button" data-pdf="<%= item.Pdf_path %>" data-xlsx="<%= item.xlsx_path %>">
                            <%= new Date(item.timestamp).toLocaleString() %>
                        </button>
                        <div class="details hidden">
                            <h2>Details for <%= new Date(item.timestamp).toLocaleString() %></h2>
                            <p>PDF Path: <%= item.Pdf_path %></p>
                            <p>XLSX Path: <%= item.xlsx_path %></p>
                        </div>
                    </div>
                <% }); %>
            </div>
        <% } else { %>
            <p class="no-history">No upload history available.</p>
        <% } %>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const dateButtons = document.querySelectorAll('.date-button');
        
            dateButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const details = this.nextElementSibling;
                    if (details.classList.contains('hidden')) {
                        // Hide all details
                        document.querySelectorAll('.details').forEach(detail => {
                            detail.classList.add('hidden');
                        });
                        // Show details for this item
                        details.classList.remove('hidden');
                    } else {
                        // Hide details if already shown
                        details.classList.add('hidden');
                    }
                });
            });
        });       
    </script>
</body>
</html>
